\section{Комплекс программ для решения задачи подбора скрытой полумарковской модели источника ошибок}\label{chapt3_Implementation}
В этом разделе представлено описание и особенности реализации программного комплекса, позволяющего решать задачу подбора скрытой полумарковской модели источника ошибок.

\subsection{Описание программного комплекса.}
Для решения задачи подбора скрытой полумарковской модели источника ошибок разработан специальный комплекс программ \textbf{HsmmErrorSourcesAnalysis}, позволяющий подбирать модель источника из класса скрытых полумарковских $QP$-моделей и скрытых полумарковских моделей Фергюсоновского типа, наиболее адекватно подходящую для генерации заданной на вход последовательности.

Данный программный комплекс предоставляет исследователю возможность рассчитывать вероятность генерации заданной пользователем последовательности выбранной скрытой полумарковской моделью одного из перечисленных выше типов, а также выбирать наиболее подходящую в смысле выбранного критерия модель по заданной последовательности.

Программный комплекс \textbf{HsmmErrorSourcesAnalysis} реализован на языке программирования высокого уровня $C\sharp$. Необходимым условием для работы программного продукта является наличие .NET Framework 4.0. В основе архитектуры комплекса лежат принципы объектно-ориентированного дизайна.

На рисунке \ref{fig:chapt3_GenerationDFD} представлена диаграмма потоков данных программного комплекса \textbf{HsmmErrorSourcesAnalysis}.

\begin{center}\label{fig:chapt3_GenerationDFD}
\includegraphics[height=100mm]{/part2/GenerationDFD.pdf}

Рис.3.5.1.1. Диаграмма потоков данных программного комплекса \textbf{HsmmErrorSourcesAnalysis}.
\end{center}

%Дадим следующие необходимые пояснения. Пользователь комплекса, которым является исследователь моделей источников ошибок,  задает необходимые параметры генерации, а именно, имя файла, содержащего описание модели; код (идентификатор) генератора случайных чисел; длину выходной последовательности ошибок; имя файла, в который должна быть записана выходная последовательность. Имена файлов могут задаваться как в виде абсолютного, так и в виде относительного пути. Программный комплекс поддерживает три типа генераторов случайных чисел, подробнее о которых будет говориться ниже.
%
%Введенные пользователем параметры передаются подсистеме "Интерфейс пользователя" (Подсистема 1), которая обрабатывает их и обращается к файловой системе для получения содержимого файла с описанием модели источника ошибок, которое для удобства представлено в виде JSON-объекта. Полученный JSON-объект модели, а также данные о типе генератора случайных чисел и длине последовательности Подсистема 1 передает подсистеме управления генерацией последовательности ошибок (Подсистема 2).
%
%Подсистема 2 делает запрос к подсистеме сериализации/десериализации JSON-объектов модели (Подсистема 3), чтобы получить представление модели источника ошибок нужного типа в виде объекта в памяти, после чего передает этот объект подсистеме валидации модели ошибок (Подсистема 4).
%
%Подсистема валидации модели ошибок проверяет корректность заданных параметров модели с точки зрения консистентности и выполнения всех необходимых условий. По окончанию проверки она возвращает Подсистеме 2 результат валидации, содержащий список возникших при валидации модели ошибок.
%
%В случае, если модель задана корректно, результат валидации содержит пустой список ошибок. В этом случае подсистема управления генерацией передает объект модели источника ошибок и длину выходной последовательности подсистеме генерации последовательности ошибок (Подсистема 5) и получает обратно результат генерации, содержащий список возникших ошибок и, в случае их отсутствия, успешно сгенерированную последовательность. Объект результата генерации передается в Подсистему 1.
%
%В случае, если модель задана некорректно Подсистема 2 формирует на основе результата валидации объект результата генерации, содержащий список ошибок валидации и передает его в Подсистему 1.
%
%В Подсистеме 1 производится анализ полученного результата генерации. В случае, если список ошибок генерации не пуст, список возникших ошибок выводится на экран. Если же ошибок не возникло, то сгенерированная последовательность записывается в текстовый файл, указанный пользователем и на экран выводится сообщение об успешном завершении генерации.

\subsection{Структура программного комплекса.}

Структурно программный комплекс состоит из нескольких, логически разделенных модулей. Оболочкой программного комплекса является консольное приложение \textbf{HsmmErrorSources.AnalysisApp}, предоставляющее пользователю простейший интерфейс для задания параметров работы комплекса и его запуска в выбранном режиме. Приложение может осуществлять две различные задачи --- вычислять вероятность генерации заданной последовательности указанной пользователем моделью источника ошибок и выбирать 
\"наилучшую\" модель в смысле выбранного критерия. В первом случае входными параметрами выступают путь к файлу с записью исследуемой последовательности ошибок и путь к файлу, содержащему модель источника ошибок. Во втором случае, пользователю необходимо указать путь к файлу с записью исследуемой последовательности ошибок, путь к каталогу, содержащему набор файлов моделей источника ошибок и тип критерия подбора \"наилучшей\" модели.

Логическая часть программного комплекса отделена от интерфейса и вынесена в следующие потенциально переиспользуемые модули, оформленные в виде DLL-библиотек: \textbf{HsmmErrorSources.Models} и \textbf{HsmmErrorSources.Analysis}. Модуль \textbf{HsmmErrorSources.Models} является общим для программных комплексов \textbf{HsmmErrorSourcesGeneration} и \textbf{HsmmErrorSourcesAnalysis} и, как упоминалось ранее, содержит классы, относящиеся к описанию, представлению и валидации моделей источников ошибок. Модуль \textbf{HsmmErrorSources.Analysis} содержит классы, реализующие алгоритмы решения задачи оценивания, задачи подбора, а также критерии подбора. 

Модульные тесты для классов из модуля \textbf{HsmmErrorSources.Analysis} содержатся в модуле  \textbf{HsmmErrorSources.Analysis.Test}.

На рисунке \ref{fig:chapt2_DLLDependencies} представлена диаграмма зависимостей модулей программного комплекса \textbf{HsmmErrorSources.Analysis}. Напомним, что зеленая стрелка от модуля A к модулю B говорит о том, что какие-то из классов модуля A наследуют от классов модуля B, розовая стрелка от модуля A к модулю B означает, что в классах модуля A происходит вызов классов из модуля B.
\begin{center}\label{fig:chapt2_DLLDependencies}
\includegraphics[height=70mm]{/part2/DLLDependencies.jpg}

Рис.3.5.1.2. Диаграмма зависимостей модулей программного комплекса \textbf{HsmmErrorSources.Analysis}.
\end{center}

\subsection{Модуль анализа моделей источников ошибок.}
\subsection{Программная реализация алгоритма решения задачи оценивания для скрытых полумарковских моделей}
\subsection{Программная реализация алгоритма решения задачи подбора скрытой полумарковской модели источника ошибок}
